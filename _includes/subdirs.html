{% if page.url == site.url or page.url == site.baseurl %}
{% assign parts = site.baseurl %}
{% assign level = 1 %}
{% assign current = site.baseurl %}
{% assign parent = nil %}
{% else %}
{% assign parts = page.url | split: '/' %} 
{% assign level = parts | size %} 
{% assign current = parts | last %}
{% capture parent %}{% for part in urlparts %}{{ part | remove: current }}{% endfor %}{% endcapture %} 
{% endif %}

<br>
{% if level == 1 %}<a href='{{page.url}}'>{{page.title}}</a>{% endif %} <br>
parts = {{ parts }} <br>
level = {{ level }} <br>
current = {{ current }} <br>
parent = {{ parent }} <br>
<br>
 
{% for node in site.pages %}

{% assign node_parts = node.url | split: '/' %}
{% assign node_level = node_parts | size %}
{% assign node_current = node_parts | last %}
{% capture node_parent %}{% for part in node_parts %}{{ part | remove: node_current }}{% endfor %}{% endcapture %}

<br>
<a href='{{node.url}}'>{{node.title}}</a>
node_parts = {{ node_parts }} <br>
node_level = {{ node_level }} <br> 
node_current = {{ node_current }} <br>
node_parent = {{ node_parent }} <br>
<br>

{% endfor %}
